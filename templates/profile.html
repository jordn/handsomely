{% extends "base.html" %}

{% block title %}My Account{% endblock %}

{% block content %}
{% if user.is_authenticated %}
	<h2>My Account: {{ user.email }}</h2>
	<br/>
	<div>
		<div style="float:left; width:40%;">
		<h3>Your details:</h3> 
		<form action="../update_profile/" method="post"> {% csrf_token %}
			<p>First name: &nbsp; <input type="text" name="firstName" value="{{ cust.firstName }}"/></p>
			<p>Last name: &nbsp; <input type="text" name="lastName" value="{{ cust.lastName }}"/></p>
			<p>E-mail: &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; <input type="text" name="email" value="{{ user.email }}" readonly="readonly"/></p>
			<p>Mobile: &nbsp; &nbsp; &nbsp; &nbsp; <input type="text" name="mobile" value="{{ cust.mobile }}"/></p>
			<p>Default city:&nbsp; <input type="text" name="defaultCity" value="{{ cust.defaultCity }}" readonly="readonly"/></p>
			<p>Notifications: <input type="text" name="notification_preferences"
				value="{{ cust.get_notification_preferences_display }}" readonly="readonly"/></p>
			<input type="hidden" name="djangoUserID" value="{{ user.id }}"/>
			</p><input type="submit" value="Save" /> </p>
		</form>
		</div>
		<div style="float:left; width:40%;">
		<h3>Recent requests</h3>
		{% if reqs %}
			<table border="1" cellpadding="5">
			<tr><th>Salon</th><th>Date & time requested</th><th>Status</th></tr>
			{% for req in reqs reversed %}
				<tr><td>{{ req.salonID }}</td><td>{{ req.startDate }}</td><td>{{ req.get_status_display }}</td></tr>
			{% endfor %}
			</table>
			<b>...</b>
		{% else %}
			<b>None</b>
		{% endif %}
		</div>
{% if handUser.salonID != -1 or handUser.salonID != -1 %}
	<div style="float:left; width:20%;">
		<h2>Salon Page</h2>
		<p><a href="/notify/">Click here to notify customers</a></p>
	</div>
{% endif %}
	</div>
{% else %} 
	<p><b>Please <a href="/login">log in</a> or <a href="../register">register</a>!</b></p>
{% endif %}
{% endblock %}
